import os
import cv2
import albumentations as A
import numpy as np

original_dir = "/home/irem/hackathon/original"
mask_dir = "/home/irem/hackathon/masks"
augmented_dir = "/home/irem/hackathon/augmented"

augment = A.Compose([
    A.ToGray(p=1.0)  
])

# Loop through each file in the 'original' directory
for filename in os.listdir(original_dir):
    # Make sure to process only PNG files (or change the extension as needed)
    if filename.endswith(".png"):
        # Build the full file paths
        original_image_path = os.path.join(original_dir, filename)
        # Load the images
        original_image = cv2.imread(original_image_path)

        # Check if images are loaded correctly
        if original_image is None:
            print(f"Error loading image or mask for {filename}")
            continue  # Skip to the next image if there's an issue

        # Apply augmentations to the original image ONLY
        augmented = augment(image=original_image)

        # Get the augmented image
        augmented_image = augmented['image']

        augmented_image_path = os.path.join(augmented_dir, f"aug_{filename}")

        # Save the images
        cv2.imwrite(augmented_image_path, augmented_image)

        print(f"Saved augmented image {filename}")

